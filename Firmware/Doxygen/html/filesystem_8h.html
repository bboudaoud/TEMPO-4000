<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TEMPO 4 Core Platform Firmware: filesystem.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="INERTIAlogo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">TEMPO 4 Core Platform Firmware
   </div>
   <div id="projectbrief">This project contains code for ultra low-power, wearable, expandable 6 or 9 Degree-of-Freedom sensing platform implemented using an MSP430F5342 from Texas Instruments</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">filesystem.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains the TEMPO 4000 file system management code.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="rtc_8h_source.html">rtc.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="system_8h_source.html">system.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for filesystem.h:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h__incl.png" border="0" usemap="#filesystem_8h" alt=""/></div>
<map name="filesystem_8h" id="filesystem_8h">
<area shape="rect" id="node2" href="rtc_8h.html" title="rtc.h" alt="" coords="5,80,53,107"/><area shape="rect" id="node3" href="system_8h.html" title="system.h" alt="" coords="78,80,153,107"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h__dep__incl.png" border="0" usemap="#filesystem_8hdep" alt=""/></div>
<map name="filesystem_8hdep" id="filesystem_8hdep">
<area shape="rect" id="node2" href="filesystem_8c.html" title="This file contains the TEMPO 4000 file system management code. " alt="" coords="5,80,96,107"/><area shape="rect" id="node3" href="system_8c.html" title="system.c" alt="" coords="121,80,196,107"/></map>
</div>
</div>
<p><a href="filesystem_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcard_status_code.html">cardStatusCode</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit field structure for card status.  <a href="structcard_status_code.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalib_information.html">calibInformation</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calibration information structure.  <a href="structcalib_information.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcard_information.html">cardInformation</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Card information structure.  <a href="structcard_information.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsession_information.html">sessionInformation</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Session information.  <a href="structsession_information.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a711acb73a3b9fa2d08836f39dc30d2ba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a711acb73a3b9fa2d08836f39dc30d2ba">CARD_INFO_INDEX</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a711acb73a3b9fa2d08836f39dc30d2ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Location of node info sector for now.  <a href="#a711acb73a3b9fa2d08836f39dc30d2ba">More...</a><br/></td></tr>
<tr class="separator:a711acb73a3b9fa2d08836f39dc30d2ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2623563d6b865f19f929d8640c04a3e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#ad2623563d6b865f19f929d8640c04a3e">SESS_START_SECTOR</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:ad2623563d6b865f19f929d8640c04a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Session/data info start sector.  <a href="#ad2623563d6b865f19f929d8640c04a3e">More...</a><br/></td></tr>
<tr class="separator:ad2623563d6b865f19f929d8640c04a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dd3babd1b2cd7581f8c1e170ff974dd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a8dd3babd1b2cd7581f8c1e170ff974dd">SESS_NOTES_SIZE</a>&#160;&#160;&#160;140</td></tr>
<tr class="memdesc:a8dd3babd1b2cd7581f8c1e170ff974dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Session information notes field size.  <a href="#a8dd3babd1b2cd7581f8c1e170ff974dd">More...</a><br/></td></tr>
<tr class="separator:a8dd3babd1b2cd7581f8c1e170ff974dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58146e021bf4fcea78def872d714403b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a58146e021bf4fcea78def872d714403b">CARD_NOTES_SIZE</a>&#160;&#160;&#160;140</td></tr>
<tr class="memdesc:a58146e021bf4fcea78def872d714403b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Card information notes field size.  <a href="#a58146e021bf4fcea78def872d714403b">More...</a><br/></td></tr>
<tr class="separator:a58146e021bf4fcea78def872d714403b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a06490cd75e9b43fd277156bccb745c57"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53">fsReturnCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a></td></tr>
<tr class="memdesc:a06490cd75e9b43fd277156bccb745c57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumerated type for file system return codes.  <a href="#a06490cd75e9b43fd277156bccb745c57">More...</a><br/></td></tr>
<tr class="separator:a06490cd75e9b43fd277156bccb745c57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e1974962347414db7c0088942d08b57"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structcard_status_code.html">cardStatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a3e1974962347414db7c0088942d08b57">cardStatus</a></td></tr>
<tr class="memdesc:a3e1974962347414db7c0088942d08b57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit field structure for card status.  <a href="#a3e1974962347414db7c0088942d08b57">More...</a><br/></td></tr>
<tr class="separator:a3e1974962347414db7c0088942d08b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6be570e453b4c3dbee4da9b5e62e50f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structcalib_information.html">calibInformation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#aa6be570e453b4c3dbee4da9b5e62e50f">calibInfo</a></td></tr>
<tr class="memdesc:aa6be570e453b4c3dbee4da9b5e62e50f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calibration information structure.  <a href="#aa6be570e453b4c3dbee4da9b5e62e50f">More...</a><br/></td></tr>
<tr class="separator:aa6be570e453b4c3dbee4da9b5e62e50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c8c6718a71ad9a5951c5a1a642f1daf"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structcard_information.html">cardInformation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a6c8c6718a71ad9a5951c5a1a642f1daf">cardInfo</a></td></tr>
<tr class="memdesc:a6c8c6718a71ad9a5951c5a1a642f1daf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Card information structure.  <a href="#a6c8c6718a71ad9a5951c5a1a642f1daf">More...</a><br/></td></tr>
<tr class="separator:a6c8c6718a71ad9a5951c5a1a642f1daf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a721ecf2ba6c46e8a12e3fa9f3034db4f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsession_information.html">sessionInformation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a721ecf2ba6c46e8a12e3fa9f3034db4f">sessInfo</a></td></tr>
<tr class="memdesc:a721ecf2ba6c46e8a12e3fa9f3034db4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Session information.  <a href="#a721ecf2ba6c46e8a12e3fa9f3034db4f">More...</a><br/></td></tr>
<tr class="separator:a721ecf2ba6c46e8a12e3fa9f3034db4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a81ac774508f9a52bd075dbbb86405f53"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53">fsReturnCode</a> { <br/>
&#160;&#160;<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53ac0412d2854d931a1c86f3e96327da915">FS_SUCCESS</a> = 0, 
<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53a17ae8a0909eea38fe78bbf7fd8d958ab">FS_FAIL_RO</a> = 1, 
<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53a07cec75760eb62a7b3bc5cb8ed09b80f">FS_FAIL_SIP</a> = 2, 
<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53a662df894bbb050136e1e541106c58cf2">FS_FAIL_CF</a> = 3, 
<br/>
&#160;&#160;<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53a5dc43835ebc281a83d82f3ddb3998631">FS_FAIL_BF</a> = 4, 
<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53a6a78d92d891249d10268fadeaa73f82a">FS_FAIL_WF</a> = 5, 
<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53ad84d94aaff21107886471385def5a203">FS_FAIL_RF</a> = 6, 
<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53ae8c06bf511490631a3a1af58f875a262">FS_FAIL_INIT</a> = 7, 
<br/>
&#160;&#160;<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53ad465960cb382afa45326a1518af5eede">FS_FAIL_NR</a> = 8, 
<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53afb0749fbb1923c0d9b58ad09f1329ab2">FS_FAIL_INFO</a> = 9, 
<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53a8182fb48b6ea053b8442f9e98b465e2f">FS_FAIL_ID</a> = 10, 
<a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53af7c9fd9ffe8b09822f3dc049b4e22a20">FS_FAIL_DCE</a> = 11
<br/>
 }</td></tr>
<tr class="memdesc:a81ac774508f9a52bd075dbbb86405f53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumerated type for file system return codes.  <a href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53">More...</a><br/></td></tr>
<tr class="separator:a81ac774508f9a52bd075dbbb86405f53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa42594b4220920802e420eaba060ade9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#aa42594b4220920802e420eaba060ade9">updateCardInfo</a> (void)</td></tr>
<tr class="memdesc:aa42594b4220920802e420eaba060ade9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the card info in flash.  <a href="#aa42594b4220920802e420eaba060ade9">More...</a><br/></td></tr>
<tr class="separator:aa42594b4220920802e420eaba060ade9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeff5276ca19830c36f34523ec7e37cc8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#aeff5276ca19830c36f34523ec7e37cc8">writeSessInfo</a> (unsigned long sectorNum)</td></tr>
<tr class="memdesc:aeff5276ca19830c36f34523ec7e37cc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the session info in flash.  <a href="#aeff5276ca19830c36f34523ec7e37cc8">More...</a><br/></td></tr>
<tr class="separator:aeff5276ca19830c36f34523ec7e37cc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada45f07f195ba84cd4feb3b6c3203999"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#ada45f07f195ba84cd4feb3b6c3203999">cardStatusClear</a> (void)</td></tr>
<tr class="memdesc:ada45f07f195ba84cd4feb3b6c3203999"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the card status field.  <a href="#ada45f07f195ba84cd4feb3b6c3203999">More...</a><br/></td></tr>
<tr class="separator:ada45f07f195ba84cd4feb3b6c3203999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37237af6c97cdc2d5a694f4e06892a76"><td class="memItemLeft" align="right" valign="top"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a37237af6c97cdc2d5a694f4e06892a76">fsInit</a> (unsigned int <a class="el" href="system_8c.html#a35bb87da21d354b827425c8cf4428fe9">nodeID</a>, unsigned int epoch, unsigned long startSector, unsigned char *nodeNotes)</td></tr>
<tr class="memdesc:a37237af6c97cdc2d5a694f4e06892a76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the file system.  <a href="#a37237af6c97cdc2d5a694f4e06892a76">More...</a><br/></td></tr>
<tr class="separator:a37237af6c97cdc2d5a694f4e06892a76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a269eb183d5620ad03476838d2d6dcf2c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a269eb183d5620ad03476838d2d6dcf2c">fsResume</a> (void)</td></tr>
<tr class="memdesc:a269eb183d5620ad03476838d2d6dcf2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume the file system.  <a href="#a269eb183d5620ad03476838d2d6dcf2c">More...</a><br/></td></tr>
<tr class="separator:a269eb183d5620ad03476838d2d6dcf2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52a6f393ec15b8e284bc930f952cd4fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a52a6f393ec15b8e284bc930f952cd4fb">fsStartSession</a> (unsigned int SR, <a class="el" href="structaxis_ctrl.html">axisCtrl</a> axis, <a class="el" href="rtc_8h.html#a4dbb9ef94ad211724d5389782d755ccc">time</a> *startTime)</td></tr>
<tr class="memdesc:a52a6f393ec15b8e284bc930f952cd4fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a new session.  <a href="#a52a6f393ec15b8e284bc930f952cd4fb">More...</a><br/></td></tr>
<tr class="separator:a52a6f393ec15b8e284bc930f952cd4fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad29a980f158d6e70f9d4eeac81863b2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#ad29a980f158d6e70f9d4eeac81863b2e">fsEndSession</a> (<a class="el" href="rtc_8h.html#a4dbb9ef94ad211724d5389782d755ccc">time</a> *endTime, <a class="el" href="system_8h.html#aa15e9fc8efd9647f44f2a001171b96ad">sessStatus</a> <a class="el" href="system_8c.html#a4e8d4a598d52b52aeb809bb1cdcbf827">closeCause</a>, unsigned char cardUpdate)</td></tr>
<tr class="memdesc:ad29a980f158d6e70f9d4eeac81863b2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">End a running session.  <a href="#ad29a980f158d6e70f9d4eeac81863b2e">More...</a><br/></td></tr>
<tr class="separator:ad29a980f158d6e70f9d4eeac81863b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38da66fc085afbb50769720a65511e7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a38da66fc085afbb50769720a65511e7a">fsWriteData</a> (unsigned char *data, unsigned int len)</td></tr>
<tr class="memdesc:a38da66fc085afbb50769720a65511e7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to the current open data session.  <a href="#a38da66fc085afbb50769720a65511e7a">More...</a><br/></td></tr>
<tr class="separator:a38da66fc085afbb50769720a65511e7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a365bb073efe6ce2fd372d3ba9c98affb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8h.html#a365bb073efe6ce2fd372d3ba9c98affb">fsHalt</a> (void)</td></tr>
<tr class="memdesc:a365bb073efe6ce2fd372d3ba9c98affb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Halt the file system and save the state.  <a href="#a365bb073efe6ce2fd372d3ba9c98affb">More...</a><br/></td></tr>
<tr class="separator:a365bb073efe6ce2fd372d3ba9c98affb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the TEMPO 4000 file system management code. </p>
<dl class="section author"><dt>Author</dt><dd>Ben Boudaoud (<a href="#" onclick="location.href='mai'+'lto:'+'bb3'+'jd'+'@vi'+'rg'+'ini'+'a.'+'edu'; return false;">bb3jd<span style="display: none;">.nosp@m.</span>@vir<span style="display: none;">.nosp@m.</span>ginia<span style="display: none;">.nosp@m.</span>.edu</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Sep 11, 2013</dd></dl>
<p>This library provides a simple interface for all flash operations along with a minimalist, linked-list style implementation of a basic file system. This file system is NOT COMPATIBLE with any previous TEMPO platform, including the TEMPO 3.2F custom file system authored by Jeff Brantly. </p>

<p>Definition in file <a class="el" href="filesystem_8h_source.html">filesystem.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a711acb73a3b9fa2d08836f39dc30d2ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CARD_INFO_INDEX&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Location of node info sector for now. </p>

<p>Definition at line <a class="el" href="filesystem_8h_source.html#l00020">20</a> of file <a class="el" href="filesystem_8h_source.html">filesystem.h</a>.</p>

</div>
</div>
<a class="anchor" id="a58146e021bf4fcea78def872d714403b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CARD_NOTES_SIZE&#160;&#160;&#160;140</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Card information notes field size. </p>

<p>Definition at line <a class="el" href="filesystem_8h_source.html#l00023">23</a> of file <a class="el" href="filesystem_8h_source.html">filesystem.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8dd3babd1b2cd7581f8c1e170ff974dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SESS_NOTES_SIZE&#160;&#160;&#160;140</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Session information notes field size. </p>

<p>Definition at line <a class="el" href="filesystem_8h_source.html#l00022">22</a> of file <a class="el" href="filesystem_8h_source.html">filesystem.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad2623563d6b865f19f929d8640c04a3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SESS_START_SECTOR&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Session/data info start sector. </p>

<p>Definition at line <a class="el" href="filesystem_8h_source.html#l00021">21</a> of file <a class="el" href="filesystem_8h_source.html">filesystem.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="aa6be570e453b4c3dbee4da9b5e62e50f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structcalib_information.html">calibInformation</a>  <a class="el" href="filesystem_8h.html#aa6be570e453b4c3dbee4da9b5e62e50f">calibInfo</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calibration information structure. </p>

</div>
</div>
<a class="anchor" id="a6c8c6718a71ad9a5951c5a1a642f1daf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structcard_information.html">cardInformation</a>  <a class="el" href="filesystem_8h.html#a6c8c6718a71ad9a5951c5a1a642f1daf">cardInfo</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Card information structure. </p>
<dl class="section warning"><dt>Warning</dt><dd>Do not increase this structure beyond <a class="el" href="flash_8h.html#aa35bad1e92008da628f27b2f6bb270aa" title="True sector size. ">SECTOR_SIZE</a> bytes! </dd></dl>

</div>
</div>
<a class="anchor" id="a3e1974962347414db7c0088942d08b57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structcard_status_code.html">cardStatusCode</a>  <a class="el" href="filesystem_8h.html#a3e1974962347414db7c0088942d08b57">cardStatus</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bit field structure for card status. </p>

</div>
</div>
<a class="anchor" id="a06490cd75e9b43fd277156bccb745c57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53">fsReturnCode</a>  <a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumerated type for file system return codes. </p>

</div>
</div>
<a class="anchor" id="a721ecf2ba6c46e8a12e3fa9f3034db4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsession_information.html">sessionInformation</a>  <a class="el" href="filesystem_8h.html#a721ecf2ba6c46e8a12e3fa9f3034db4f">sessInfo</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Session information. </p>
<dl class="section warning"><dt>Warning</dt><dd>Do not increase this structure beyond <a class="el" href="flash_8h.html#aa35bad1e92008da628f27b2f6bb270aa" title="True sector size. ">SECTOR_SIZE</a> bytes! </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="filesystem_8h.html#a81ac774508f9a52bd075dbbb86405f53">fsReturnCode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumerated type for file system return codes. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53ac0412d2854d931a1c86f3e96327da915"></a>FS_SUCCESS</em>&nbsp;</td><td class="fielddoc">
<p>Operation successful. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53a17ae8a0909eea38fe78bbf7fd8d958ab"></a>FS_FAIL_RO</em>&nbsp;</td><td class="fielddoc">
<p>Operation failed: read only. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53a07cec75760eb62a7b3bc5cb8ed09b80f"></a>FS_FAIL_SIP</em>&nbsp;</td><td class="fielddoc">
<p>Operation failed: session in progress. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53a662df894bbb050136e1e541106c58cf2"></a>FS_FAIL_CF</em>&nbsp;</td><td class="fielddoc">
<p>Operation failed: card full. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53a5dc43835ebc281a83d82f3ddb3998631"></a>FS_FAIL_BF</em>&nbsp;</td><td class="fielddoc">
<p>Operation failed: buffer full. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53a6a78d92d891249d10268fadeaa73f82a"></a>FS_FAIL_WF</em>&nbsp;</td><td class="fielddoc">
<p>Operation failed: write fail. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53ad84d94aaff21107886471385def5a203"></a>FS_FAIL_RF</em>&nbsp;</td><td class="fielddoc">
<p>Operation failed: read fail. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53ae8c06bf511490631a3a1af58f875a262"></a>FS_FAIL_INIT</em>&nbsp;</td><td class="fielddoc">
<p>Operation failed: need initialization. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53ad465960cb382afa45326a1518af5eede"></a>FS_FAIL_NR</em>&nbsp;</td><td class="fielddoc">
<p>Operation failed: need resume. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53afb0749fbb1923c0d9b58ad09f1329ab2"></a>FS_FAIL_INFO</em>&nbsp;</td><td class="fielddoc">
<p>Operation failed: info flash compromised. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53a8182fb48b6ea053b8442f9e98b465e2f"></a>FS_FAIL_ID</em>&nbsp;</td><td class="fielddoc">
<p>Operation failed: info card id and actual id mismatch. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a81ac774508f9a52bd075dbbb86405f53af7c9fd9ffe8b09822f3dc049b4e22a20"></a>FS_FAIL_DCE</em>&nbsp;</td><td class="fielddoc">
<p>Operation failed: need to set data collection enabled. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="filesystem_8h_source.html#l00026">26</a> of file <a class="el" href="filesystem_8h_source.html">filesystem.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ada45f07f195ba84cd4feb3b6c3203999"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cardStatusClear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear the card status field. </p>
<p>This function resets the card status field to whatever should be the default value/set of values.</p>
<dl class="section return"><dt>Returns</dt><dd>fsRetCode A file system return code (see <a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57" title="Enumerated type for file system return codes. ">fsRetCode</a>) </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8c_source.html#l00076">76</a> of file <a class="el" href="filesystem_8c_source.html">filesystem.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_ada45f07f195ba84cd4feb3b6c3203999_icgraph.png" border="0" usemap="#filesystem_8h_ada45f07f195ba84cd4feb3b6c3203999_icgraph" alt=""/></div>
<map name="filesystem_8h_ada45f07f195ba84cd4feb3b6c3203999_icgraph" id="filesystem_8h_ada45f07f195ba84cd4feb3b6c3203999_icgraph">
<area shape="rect" id="node2" href="filesystem_8h.html#a37237af6c97cdc2d5a694f4e06892a76" title="Initialize the file system. " alt="" coords="169,5,218,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad29a980f158d6e70f9d4eeac81863b2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a> fsEndSession </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rtc_8h.html#a4dbb9ef94ad211724d5389782d755ccc">time</a> *&#160;</td>
          <td class="paramname"><em>endTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="system_8h.html#aa15e9fc8efd9647f44f2a001171b96ad">sessStatus</a>&#160;</td>
          <td class="paramname"><em>closeCause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>cardUpdate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>End a running session. </p>
<p>This function ends a session currently being stored to on the file system.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endTime</td><td>The end time of this data session (to get from RTC set Mon field to 0) </td></tr>
    <tr><td class="paramname">closeCause</td><td>The reason for the session ending (see <a class="el" href="system_8h.html#aa15e9fc8efd9647f44f2a001171b96ad" title="Enumerated type for session close cause. ">sessStatus</a>) </td></tr>
    <tr><td class="paramname">cardUpdate</td><td>Boolean flag indicating whether or not to update the card header </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">fsRetCode</td><td>A file system return code (see <a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57" title="Enumerated type for file system return codes. ">fsRetCode</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Side Effects:</dt><dd>Clears the session in progress (SIP) when done </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8c_source.html#l00292">292</a> of file <a class="el" href="filesystem_8c_source.html">filesystem.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_ad29a980f158d6e70f9d4eeac81863b2e_cgraph.png" border="0" usemap="#filesystem_8h_ad29a980f158d6e70f9d4eeac81863b2e_cgraph" alt=""/></div>
<map name="filesystem_8h_ad29a980f158d6e70f9d4eeac81863b2e_cgraph" id="filesystem_8h_ad29a980f158d6e70f9d4eeac81863b2e_cgraph">
<area shape="rect" id="node2" href="flash_8c.html#a7f9ba32003fba07b69105b9bea9fed4c" title="Write a sector and read it back to verify correctness. " alt="" coords="315,78,439,105"/><area shape="rect" id="node4" href="rtc_8c.html#a932ad0638809d1facdb1481fee1d78c8" title="rtcGetTime" alt="" coords="169,27,255,54"/><area shape="rect" id="node5" href="filesystem_8c.html#aeff5276ca19830c36f34523ec7e37cc8" title="Update the session info in flash. " alt="" coords="163,78,261,105"/><area shape="rect" id="node6" href="filesystem_8c.html#aa42594b4220920802e420eaba060ade9" title="Update the card info in flash. " alt="" coords="158,129,266,155"/><area shape="rect" id="node3" href="flash_8h.html#aab676ef9ba7690db2729bc7901975927" title="Perform a 16&#45;bit fletcher checksum on a buffer. " alt="" coords="489,78,615,105"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_ad29a980f158d6e70f9d4eeac81863b2e_icgraph.png" border="0" usemap="#filesystem_8h_ad29a980f158d6e70f9d4eeac81863b2e_icgraph" alt=""/></div>
<map name="filesystem_8h_ad29a980f158d6e70f9d4eeac81863b2e_icgraph" id="filesystem_8h_ad29a980f158d6e70f9d4eeac81863b2e_icgraph">
<area shape="rect" id="node2" href="filesystem_8h.html#a365bb073efe6ce2fd372d3ba9c98affb" title="Halt the file system and save the state. " alt="" coords="171,5,226,32"/><area shape="rect" id="node3" href="system_8h.html#abbd955a477f08dbfae43e8c40b7b4d3b" title="End a data session. " alt="" coords="563,56,677,83"/><area shape="rect" id="node6" href="system_8h.html#aed7fd0b0746e3855fcbd2f62b4b34c3e" title="Enqueue a sysEvent in the event queue for execution. " alt="" coords="157,157,240,184"/><area shape="rect" id="node4" href="system_8h.html#a3281e94ef2cc4e5d88bfcdaa503e673c" title="Execute the next event waiting on the event queue. " alt="" coords="894,183,1005,209"/><area shape="rect" id="node5" href="main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667" title="main" alt="" coords="1053,221,1104,248"/><area shape="rect" id="node7" href="system_8h.html#a2be52727e38f4ff8974fee6e8cc7154f" title="Wake the system from sleep to start taking data or enter command. " alt="" coords="293,107,371,133"/><area shape="rect" id="node9" href="system_8h.html#a0e2e8dad2acdd9148767c662b08edb1b" title="Sample the MPU on an interrupt. " alt="" coords="289,157,375,184"/><area shape="rect" id="node13" href="system_8h.html#a741860d7c7ca2fc2ab305996586da3a8" title="Stop data collection. " alt="" coords="431,259,507,285"/><area shape="rect" id="node14" href="system_8h.html#a972eedbc68ae911757b8efa8952aa1fc" title="Update the system state. " alt="" coords="739,271,831,297"/><area shape="rect" id="node8" href="system_8h.html#ab112a1e0291e6fe889425ea1af602171" title="Put the system to sleep. " alt="" coords="431,107,507,133"/><area shape="rect" id="node10" href="system_8h.html#a776671d27b9823dfa3b52cb403eb5e2f" title="Start a new data session. " alt="" coords="726,183,845,209"/><area shape="rect" id="node11" href="system_8h.html#af0c0706aba53d227b07eb1c9fbadd568" title="Resume collection during a pause from data collection. " alt="" coords="424,208,515,235"/><area shape="rect" id="node12" href="system_8h.html#ad5e178a6a6d6d9bf4451608d1ed1c7ef" title="Pause the system during data collection. " alt="" coords="580,208,660,235"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a365bb073efe6ce2fd372d3ba9c98affb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a> fsHalt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Halt the file system and save the state. </p>
<p>This function allows the user to quickly close any open sessions and save all metadata to the card. Useful for shutdown and SVS operations.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">fsRetCode</td><td>A file system return code (see <a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57" title="Enumerated type for file system return codes. ">fsRetCode</a>) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="filesystem_8c_source.html#l00391">391</a> of file <a class="el" href="filesystem_8c_source.html">filesystem.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_a365bb073efe6ce2fd372d3ba9c98affb_cgraph.png" border="0" usemap="#filesystem_8h_a365bb073efe6ce2fd372d3ba9c98affb_cgraph" alt=""/></div>
<map name="filesystem_8h_a365bb073efe6ce2fd372d3ba9c98affb_cgraph" id="filesystem_8h_a365bb073efe6ce2fd372d3ba9c98affb_cgraph">
<area shape="rect" id="node2" href="infoflash_8c.html#a19b6173321397a194a3dd96211bc9f38" title="Update last session serial and time epoch to info flash. " alt="" coords="109,30,256,57"/><area shape="rect" id="node3" href="filesystem_8c.html#ad29a980f158d6e70f9d4eeac81863b2e" title="End a running session. " alt="" coords="131,81,234,108"/><area shape="rect" id="node8" href="filesystem_8c.html#aa42594b4220920802e420eaba060ade9" title="Update the card info in flash. " alt="" coords="305,132,413,158"/><area shape="rect" id="node4" href="flash_8c.html#a7f9ba32003fba07b69105b9bea9fed4c" title="Write a sector and read it back to verify correctness. " alt="" coords="462,81,586,108"/><area shape="rect" id="node6" href="rtc_8c.html#a932ad0638809d1facdb1481fee1d78c8" title="rtcGetTime" alt="" coords="315,30,402,57"/><area shape="rect" id="node7" href="filesystem_8c.html#aeff5276ca19830c36f34523ec7e37cc8" title="Update the session info in flash. " alt="" coords="309,81,408,108"/><area shape="rect" id="node5" href="flash_8h.html#aab676ef9ba7690db2729bc7901975927" title="Perform a 16&#45;bit fletcher checksum on a buffer. " alt="" coords="635,81,762,108"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a37237af6c97cdc2d5a694f4e06892a76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a> fsInit </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nodeID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>epoch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>startSector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>nodeNotes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the file system. </p>
<p>This function reinitializes (read re-formats) the file system based upon the set of inputs provided by the parameter list. This function SHOULD NOT be used to initialize flash on device load (see <a class="el" href="filesystem_8h.html#a269eb183d5620ad03476838d2d6dcf2c" title="Resume the file system. ">fsResume</a>)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nodeID</td><td>The desired node identification number </td></tr>
    <tr><td class="paramname">epoch</td><td>The desired time epoch number </td></tr>
    <tr><td class="paramname">startSector</td><td>The sector at which to start recording data </td></tr>
    <tr><td class="paramname">*nodeNotes</td><td>A pointer to a string which contains any futher node information </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fsRetCode A file system return code (see <a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57" title="Enumerated type for file system return codes. ">fsRetCode</a>) </dd></dl>
<dl class="section user"><dt>Side Effects:</dt><dd>Previous data may not be recoverable after running <a class="el" href="filesystem_8h.html#a37237af6c97cdc2d5a694f4e06892a76" title="Initialize the file system. ">fsInit</a> </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8c_source.html#l00102">102</a> of file <a class="el" href="filesystem_8c_source.html">filesystem.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_a37237af6c97cdc2d5a694f4e06892a76_cgraph.png" border="0" usemap="#filesystem_8h_a37237af6c97cdc2d5a694f4e06892a76_cgraph" alt=""/></div>
<map name="filesystem_8h_a37237af6c97cdc2d5a694f4e06892a76_cgraph" id="filesystem_8h_a37237af6c97cdc2d5a694f4e06892a76_cgraph">
<area shape="rect" id="node2" href="infoflash_8c.html#a862d6371e73dfa8462c5c7f59211943d" title="Initialize RAM copies of Info flash values. " alt="" coords="308,5,367,32"/><area shape="rect" id="node4" href="infoflash_8c.html#ada5d37bc280f223a9d65a27f9f5a69cd" title="Set card ID and re&#45;init serials. " alt="" coords="121,107,207,133"/><area shape="rect" id="node5" href="filesystem_8c.html#ada45f07f195ba84cd4feb3b6c3203999" title="Clear the card status field. " alt="" coords="107,157,221,184"/><area shape="rect" id="node6" href="flash_8c.html#a9f9e0b850d75d42457f69e391e89c4c6" title="Initialize flash card for communication. " alt="" coords="131,208,197,235"/><area shape="rect" id="node18" href="flash_8c.html#a095c41f1a2a8a1aa697e3cfb048c8b16" title="Read the card ID directly from the MMC card. " alt="" coords="105,259,223,285"/><area shape="rect" id="node22" href="rtc_8c.html#a932ad0638809d1facdb1481fee1d78c8" title="rtcGetTime" alt="" coords="121,309,207,336"/><area shape="rect" id="node23" href="filesystem_8c.html#aa42594b4220920802e420eaba060ade9" title="Update the card info in flash. " alt="" coords="110,56,218,83"/><area shape="rect" id="node3" href="flash_8h.html#aab676ef9ba7690db2729bc7901975927" title="Perform a 16&#45;bit fletcher checksum on a buffer. " alt="" coords="459,31,586,57"/><area shape="rect" id="node7" href="mmc_8c.html#a674b53ab2cb86b4c079847a4d4f7b3f5" title="mmcInit" alt="" coords="303,169,371,196"/><area shape="rect" id="node8" href="comm_8c.html#af70da4f96e4931b9e26a6bbac4fce4bf" title="Registers an application for use of a USCI module. " alt="" coords="471,93,574,120"/><area shape="rect" id="node9" href="comm_8c.html#a85941a258add379ddb8f307f0e4d994c" title="Resets USCI B0 without writing over control regs. " alt="" coords="480,144,565,171"/><area shape="rect" id="node10" href="mmc_8c.html#a5b04c47aebbc621561f4191273d4577f" title="mmcGoIdle" alt="" coords="479,195,567,221"/><area shape="rect" id="node11" href="mmc_8c.html#a45553c72d5076047f5fa8a1da13d0e44" title="mmcSendCmd" alt="" coords="654,296,762,323"/><area shape="rect" id="node16" href="mmc_8c.html#a6e83355b1d22a078cac7314143c8b2d4" title="mmcGetResponse" alt="" coords="643,347,773,373"/><area shape="rect" id="node17" href="comm_8c.html#a3e827eea726cc3abb1cb310b459a0781" title="Set method for USCI B0 Baud Rate Divisor. " alt="" coords="656,195,760,221"/><area shape="rect" id="node12" href="mmc_8c.html#aab58b8b57456cc34e76aaa63478b424a" title="spiSendFrame" alt="" coords="821,296,928,323"/><area shape="rect" id="node13" href="comm_8c.html#acac01b5fff8d81782043a7510da979dc" title="Transmit method for USCI B0 SPI operation. " alt="" coords="982,271,1069,297"/><area shape="rect" id="node15" href="comm_8c.html#a30cd6ac2ee3f3ebb409b63fcdcabf28d" title="Get method for USCI B0 status. " alt="" coords="976,321,1075,348"/><area shape="rect" id="node14" href="comm_8c.html#a4f101e86fed045bdeccb60f91eaa02fd" title="Configures USCI B0 for operation. " alt="" coords="1123,271,1203,297"/><area shape="rect" id="node19" href="mmc_8c.html#a63d851f51d5bd56fe158a4d902d7a039" title="mmcReadRegister" alt="" coords="273,296,402,323"/><area shape="rect" id="node20" href="mmc_8c.html#aa088e2b5d1a1fc155c30d6b1c74c51c0" title="mmcSetBlockLength" alt="" coords="451,347,594,373"/><area shape="rect" id="node21" href="mmc_8c.html#a5c1de14a403aada7078527fd311078c7" title="mmcGetXXResponse" alt="" coords="451,245,595,272"/><area shape="rect" id="node24" href="flash_8c.html#a7f9ba32003fba07b69105b9bea9fed4c" title="Write a sector and read it back to verify correctness. " alt="" coords="275,56,399,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a269eb183d5620ad03476838d2d6dcf2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a> fsResume </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resume the file system. </p>
<p>This function resume the file system after a power-off or flash-card removal event. This function should be used instead of <a class="el" href="filesystem_8h.html#a37237af6c97cdc2d5a694f4e06892a76" title="Initialize the file system. ">fsInit</a> during typical device boot-up procedure.</p>
<dl class="section return"><dt>Returns</dt><dd>fsRetCode A file system return code (see <a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57" title="Enumerated type for file system return codes. ">fsRetCode</a>) </dd></dl>
<dl class="section user"><dt>Side Effects:</dt><dd>Running this function stores all node metadata in the <a class="el" href="filesystem_8h.html#a6c8c6718a71ad9a5951c5a1a642f1daf" title="Card information structure. ">cardInfo</a> and <a class="el" href="filesystem_8h.html#a721ecf2ba6c46e8a12e3fa9f3034db4f" title="Session information. ">sessInfo</a> RAM structures </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8c_source.html#l00165">165</a> of file <a class="el" href="filesystem_8c_source.html">filesystem.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_a269eb183d5620ad03476838d2d6dcf2c_cgraph.png" border="0" usemap="#filesystem_8h_a269eb183d5620ad03476838d2d6dcf2c_cgraph" alt=""/></div>
<map name="filesystem_8h_a269eb183d5620ad03476838d2d6dcf2c_cgraph" id="filesystem_8h_a269eb183d5620ad03476838d2d6dcf2c_cgraph">
<area shape="rect" id="node2" href="flash_8c.html#a9f9e0b850d75d42457f69e391e89c4c6" title="Initialize flash card for communication. " alt="" coords="161,107,228,133"/><area shape="rect" id="node14" href="flash_8c.html#a095c41f1a2a8a1aa697e3cfb048c8b16" title="Read the card ID directly from the MMC card. " alt="" coords="135,208,254,235"/><area shape="rect" id="node18" href="infoflash_8c.html#a862d6371e73dfa8462c5c7f59211943d" title="Initialize RAM copies of Info flash values. " alt="" coords="165,259,224,285"/><area shape="rect" id="node20" href="infoflash_8c.html#a78655627d55a5567193e171c0be0ecdb" title="Retrieve card ID from infoflash. " alt="" coords="143,360,246,387"/><area shape="rect" id="node21" href="flash_8c.html#ac586d9a9d6b84038ddccb549052a38f5" title="Read a sector and verify the checksum. " alt="" coords="133,309,256,336"/><area shape="rect" id="node3" href="mmc_8c.html#a674b53ab2cb86b4c079847a4d4f7b3f5" title="mmcInit" alt="" coords="335,81,403,108"/><area shape="rect" id="node4" href="comm_8c.html#af70da4f96e4931b9e26a6bbac4fce4bf" title="Registers an application for use of a USCI module. " alt="" coords="503,5,606,32"/><area shape="rect" id="node5" href="comm_8c.html#a85941a258add379ddb8f307f0e4d994c" title="Resets USCI B0 without writing over control regs. " alt="" coords="512,56,597,83"/><area shape="rect" id="node6" href="mmc_8c.html#a5b04c47aebbc621561f4191273d4577f" title="mmcGoIdle" alt="" coords="511,107,599,133"/><area shape="rect" id="node7" href="mmc_8c.html#a45553c72d5076047f5fa8a1da13d0e44" title="mmcSendCmd" alt="" coords="686,157,794,184"/><area shape="rect" id="node12" href="mmc_8c.html#a6e83355b1d22a078cac7314143c8b2d4" title="mmcGetResponse" alt="" coords="675,259,805,285"/><area shape="rect" id="node13" href="comm_8c.html#a3e827eea726cc3abb1cb310b459a0781" title="Set method for USCI B0 Baud Rate Divisor. " alt="" coords="688,107,792,133"/><area shape="rect" id="node8" href="mmc_8c.html#aab58b8b57456cc34e76aaa63478b424a" title="spiSendFrame" alt="" coords="853,157,960,184"/><area shape="rect" id="node9" href="comm_8c.html#acac01b5fff8d81782043a7510da979dc" title="Transmit method for USCI B0 SPI operation. " alt="" coords="1014,132,1101,159"/><area shape="rect" id="node11" href="comm_8c.html#a30cd6ac2ee3f3ebb409b63fcdcabf28d" title="Get method for USCI B0 status. " alt="" coords="1008,183,1107,209"/><area shape="rect" id="node10" href="comm_8c.html#a4f101e86fed045bdeccb60f91eaa02fd" title="Configures USCI B0 for operation. " alt="" coords="1155,132,1235,159"/><area shape="rect" id="node15" href="mmc_8c.html#a63d851f51d5bd56fe158a4d902d7a039" title="mmcReadRegister" alt="" coords="305,208,434,235"/><area shape="rect" id="node16" href="mmc_8c.html#aa088e2b5d1a1fc155c30d6b1c74c51c0" title="mmcSetBlockLength" alt="" coords="483,259,626,285"/><area shape="rect" id="node17" href="mmc_8c.html#a5c1de14a403aada7078527fd311078c7" title="mmcGetXXResponse" alt="" coords="483,208,627,235"/><area shape="rect" id="node19" href="flash_8h.html#aab676ef9ba7690db2729bc7901975927" title="Perform a 16&#45;bit fletcher checksum on a buffer. " alt="" coords="306,259,433,285"/><area shape="rect" id="node22" href="flash_8c.html#a3acb9fe3d3714aa1dcdd72a8851e5484" title="Read a single sector from the flash card. " alt="" coords="330,309,409,336"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_a269eb183d5620ad03476838d2d6dcf2c_icgraph.png" border="0" usemap="#filesystem_8h_a269eb183d5620ad03476838d2d6dcf2c_icgraph" alt=""/></div>
<map name="filesystem_8h_a269eb183d5620ad03476838d2d6dcf2c_icgraph" id="filesystem_8h_a269eb183d5620ad03476838d2d6dcf2c_icgraph">
<area shape="rect" id="node2" href="system_8h.html#a771c49564e557c43915532fe5be26f85" title="Initialize the system (after reset) " alt="" coords="134,5,194,32"/><area shape="rect" id="node3" href="main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667" title="main" alt="" coords="243,5,293,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a52a6f393ec15b8e284bc930f952cd4fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a> fsStartSession </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>SR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structaxis_ctrl.html">axisCtrl</a>&#160;</td>
          <td class="paramname"><em>axis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtc_8h.html#a4dbb9ef94ad211724d5389782d755ccc">time</a> *&#160;</td>
          <td class="paramname"><em>startTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a new session. </p>
<p>This function begins a new data session in the file system. This function should only be called when no other session is in progress, and after the file system has been successfully resumed or initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SR</td><td>The sampling rate of the data stream </td></tr>
    <tr><td class="paramname">axis</td><td>The axis bit-field w/ the sampled axes set to '1' </td></tr>
    <tr><td class="paramname">startTime</td><td>The start time of this data session (to get from RTC set Mon field to 0)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">fsRetCode</td><td>A file system return code (see <a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57" title="Enumerated type for file system return codes. ">fsRetCode</a>)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Side Effects:</dt><dd>Sets the session in progress (SIP) flag to prevent multiple sessions being open at once. </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8c_source.html#l00234">234</a> of file <a class="el" href="filesystem_8c_source.html">filesystem.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_a52a6f393ec15b8e284bc930f952cd4fb_cgraph.png" border="0" usemap="#filesystem_8h_a52a6f393ec15b8e284bc930f952cd4fb_cgraph" alt=""/></div>
<map name="filesystem_8h_a52a6f393ec15b8e284bc930f952cd4fb_cgraph" id="filesystem_8h_a52a6f393ec15b8e284bc930f952cd4fb_cgraph">
<area shape="rect" id="node2" href="filesystem_8c.html#aeff5276ca19830c36f34523ec7e37cc8" title="Update the session info in flash. " alt="" coords="160,5,259,32"/><area shape="rect" id="node5" href="rtc_8c.html#a932ad0638809d1facdb1481fee1d78c8" title="rtcGetTime" alt="" coords="166,56,253,83"/><area shape="rect" id="node3" href="flash_8c.html#a7f9ba32003fba07b69105b9bea9fed4c" title="Write a sector and read it back to verify correctness. " alt="" coords="307,5,431,32"/><area shape="rect" id="node4" href="flash_8h.html#aab676ef9ba7690db2729bc7901975927" title="Perform a 16&#45;bit fletcher checksum on a buffer. " alt="" coords="481,5,607,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_a52a6f393ec15b8e284bc930f952cd4fb_icgraph.png" border="0" usemap="#filesystem_8h_a52a6f393ec15b8e284bc930f952cd4fb_icgraph" alt=""/></div>
<map name="filesystem_8h_a52a6f393ec15b8e284bc930f952cd4fb_icgraph" id="filesystem_8h_a52a6f393ec15b8e284bc930f952cd4fb_icgraph">
<area shape="rect" id="node2" href="system_8h.html#a776671d27b9823dfa3b52cb403eb5e2f" title="Start a new data session. " alt="" coords="161,5,279,32"/><area shape="rect" id="node3" href="system_8h.html#a3281e94ef2cc4e5d88bfcdaa503e673c" title="Execute the next event waiting on the event queue. " alt="" coords="329,5,439,32"/><area shape="rect" id="node4" href="main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667" title="main" alt="" coords="488,5,539,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a38da66fc085afbb50769720a65511e7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a> fsWriteData </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write data to the current open data session. </p>
<p>This function write the provided data to the current card data session.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*data</td><td>Pointer to the data to be written </td></tr>
    <tr><td class="paramname">len</td><td>Length of the data to be written </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">fsRetCode</td><td>A file system return code (see <a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57" title="Enumerated type for file system return codes. ">fsRetCode</a>) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="filesystem_8c_source.html#l00337">337</a> of file <a class="el" href="filesystem_8c_source.html">filesystem.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_a38da66fc085afbb50769720a65511e7a_cgraph.png" border="0" usemap="#filesystem_8h_a38da66fc085afbb50769720a65511e7a_cgraph" alt=""/></div>
<map name="filesystem_8h_a38da66fc085afbb50769720a65511e7a_cgraph" id="filesystem_8h_a38da66fc085afbb50769720a65511e7a_cgraph">
<area shape="rect" id="node2" href="flash_8c.html#a7f9ba32003fba07b69105b9bea9fed4c" title="Write a sector and read it back to verify correctness. " alt="" coords="145,5,269,32"/><area shape="rect" id="node3" href="flash_8h.html#aab676ef9ba7690db2729bc7901975927" title="Perform a 16&#45;bit fletcher checksum on a buffer. " alt="" coords="318,5,445,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_a38da66fc085afbb50769720a65511e7a_icgraph.png" border="0" usemap="#filesystem_8h_a38da66fc085afbb50769720a65511e7a_icgraph" alt=""/></div>
<map name="filesystem_8h_a38da66fc085afbb50769720a65511e7a_icgraph" id="filesystem_8h_a38da66fc085afbb50769720a65511e7a_icgraph">
<area shape="rect" id="node2" href="system_8h.html#a0e2e8dad2acdd9148767c662b08edb1b" title="Sample the MPU on an interrupt. " alt="" coords="145,5,231,32"/><area shape="rect" id="node3" href="system_8h.html#a776671d27b9823dfa3b52cb403eb5e2f" title="Start a new data session. " alt="" coords="547,5,666,32"/><area shape="rect" id="node6" href="system_8h.html#af0c0706aba53d227b07eb1c9fbadd568" title="Resume collection during a pause from data collection. " alt="" coords="280,31,371,57"/><area shape="rect" id="node4" href="system_8h.html#a3281e94ef2cc4e5d88bfcdaa503e673c" title="Execute the next event waiting on the event queue. " alt="" coords="715,5,826,32"/><area shape="rect" id="node5" href="main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667" title="main" alt="" coords="875,5,925,32"/><area shape="rect" id="node7" href="system_8h.html#ad5e178a6a6d6d9bf4451608d1ed1c7ef" title="Pause the system during data collection. " alt="" coords="419,31,499,57"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa42594b4220920802e420eaba060ade9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a> updateCardInfo </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the card info in flash. </p>
<p>This function writes the current <a class="el" href="filesystem_8h.html#a6c8c6718a71ad9a5951c5a1a642f1daf" title="Card information structure. ">cardInfo</a> structure to the card info sector in the flash</p>
<dl class="section return"><dt>Returns</dt><dd>fsRetCode A file system return code (see <a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57" title="Enumerated type for file system return codes. ">fsRetCode</a>) </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8c_source.html#l00038">38</a> of file <a class="el" href="filesystem_8c_source.html">filesystem.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_aa42594b4220920802e420eaba060ade9_cgraph.png" border="0" usemap="#filesystem_8h_aa42594b4220920802e420eaba060ade9_cgraph" alt=""/></div>
<map name="filesystem_8h_aa42594b4220920802e420eaba060ade9_cgraph" id="filesystem_8h_aa42594b4220920802e420eaba060ade9_cgraph">
<area shape="rect" id="node2" href="flash_8c.html#a7f9ba32003fba07b69105b9bea9fed4c" title="Write a sector and read it back to verify correctness. " alt="" coords="163,5,287,32"/><area shape="rect" id="node3" href="flash_8h.html#aab676ef9ba7690db2729bc7901975927" title="Perform a 16&#45;bit fletcher checksum on a buffer. " alt="" coords="337,5,463,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_aa42594b4220920802e420eaba060ade9_icgraph.png" border="0" usemap="#filesystem_8h_aa42594b4220920802e420eaba060ade9_icgraph" alt=""/></div>
<map name="filesystem_8h_aa42594b4220920802e420eaba060ade9_icgraph" id="filesystem_8h_aa42594b4220920802e420eaba060ade9_icgraph">
<area shape="rect" id="node2" href="filesystem_8h.html#a37237af6c97cdc2d5a694f4e06892a76" title="Initialize the file system. " alt="" coords="190,5,239,32"/><area shape="rect" id="node3" href="filesystem_8h.html#ad29a980f158d6e70f9d4eeac81863b2e" title="End a running session. " alt="" coords="163,107,266,133"/><area shape="rect" id="node4" href="filesystem_8h.html#a365bb073efe6ce2fd372d3ba9c98affb" title="Halt the file system and save the state. " alt="" coords="329,56,383,83"/><area shape="rect" id="node5" href="system_8h.html#abbd955a477f08dbfae43e8c40b7b4d3b" title="End a data session. " alt="" coords="721,107,834,133"/><area shape="rect" id="node8" href="system_8h.html#aed7fd0b0746e3855fcbd2f62b4b34c3e" title="Enqueue a sysEvent in the event queue for execution. " alt="" coords="315,220,397,247"/><area shape="rect" id="node6" href="system_8h.html#a3281e94ef2cc4e5d88bfcdaa503e673c" title="Execute the next event waiting on the event queue. " alt="" coords="1051,233,1162,260"/><area shape="rect" id="node7" href="main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667" title="main" alt="" coords="1211,272,1261,299"/><area shape="rect" id="node9" href="system_8h.html#a2be52727e38f4ff8974fee6e8cc7154f" title="Wake the system from sleep to start taking data or enter command. " alt="" coords="451,157,528,184"/><area shape="rect" id="node11" href="system_8h.html#a0e2e8dad2acdd9148767c662b08edb1b" title="Sample the MPU on an interrupt. " alt="" coords="446,220,533,247"/><area shape="rect" id="node15" href="system_8h.html#a741860d7c7ca2fc2ab305996586da3a8" title="Stop data collection. " alt="" coords="589,309,665,336"/><area shape="rect" id="node16" href="system_8h.html#a972eedbc68ae911757b8efa8952aa1fc" title="Update the system state. " alt="" coords="897,321,989,348"/><area shape="rect" id="node10" href="system_8h.html#ab112a1e0291e6fe889425ea1af602171" title="Put the system to sleep. " alt="" coords="589,157,665,184"/><area shape="rect" id="node12" href="system_8h.html#a776671d27b9823dfa3b52cb403eb5e2f" title="Start a new data session. " alt="" coords="883,233,1002,260"/><area shape="rect" id="node13" href="system_8h.html#af0c0706aba53d227b07eb1c9fbadd568" title="Resume collection during a pause from data collection. " alt="" coords="581,259,672,285"/><area shape="rect" id="node14" href="system_8h.html#ad5e178a6a6d6d9bf4451608d1ed1c7ef" title="Pause the system during data collection. " alt="" coords="737,259,817,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aeff5276ca19830c36f34523ec7e37cc8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57">fsRetCode</a> writeSessInfo </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>sectorNum</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the session info in flash. </p>
<p>This function writes the current <a class="el" href="filesystem_8h.html#a721ecf2ba6c46e8a12e3fa9f3034db4f" title="Session information. ">sessInfo</a> structure to the designated sector in flash</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sectorNum</td><td>The index of the desired write sector </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fsRetCode A file system return code (see <a class="el" href="filesystem_8h.html#a06490cd75e9b43fd277156bccb745c57" title="Enumerated type for file system return codes. ">fsRetCode</a>) </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8c_source.html#l00058">58</a> of file <a class="el" href="filesystem_8c_source.html">filesystem.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_aeff5276ca19830c36f34523ec7e37cc8_cgraph.png" border="0" usemap="#filesystem_8h_aeff5276ca19830c36f34523ec7e37cc8_cgraph" alt=""/></div>
<map name="filesystem_8h_aeff5276ca19830c36f34523ec7e37cc8_cgraph" id="filesystem_8h_aeff5276ca19830c36f34523ec7e37cc8_cgraph">
<area shape="rect" id="node2" href="flash_8c.html#a7f9ba32003fba07b69105b9bea9fed4c" title="Write a sector and read it back to verify correctness. " alt="" coords="153,5,277,32"/><area shape="rect" id="node3" href="flash_8h.html#aab676ef9ba7690db2729bc7901975927" title="Perform a 16&#45;bit fletcher checksum on a buffer. " alt="" coords="326,5,453,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="filesystem_8h_aeff5276ca19830c36f34523ec7e37cc8_icgraph.png" border="0" usemap="#filesystem_8h_aeff5276ca19830c36f34523ec7e37cc8_icgraph" alt=""/></div>
<map name="filesystem_8h_aeff5276ca19830c36f34523ec7e37cc8_icgraph" id="filesystem_8h_aeff5276ca19830c36f34523ec7e37cc8_icgraph">
<area shape="rect" id="node2" href="filesystem_8h.html#a52a6f393ec15b8e284bc930f952cd4fb" title="Start a new session. " alt="" coords="736,5,843,32"/><area shape="rect" id="node6" href="filesystem_8h.html#ad29a980f158d6e70f9d4eeac81863b2e" title="End a running session. " alt="" coords="153,208,255,235"/><area shape="rect" id="node3" href="system_8h.html#a776671d27b9823dfa3b52cb403eb5e2f" title="Start a new data session. " alt="" coords="891,107,1010,133"/><area shape="rect" id="node4" href="system_8h.html#a3281e94ef2cc4e5d88bfcdaa503e673c" title="Execute the next event waiting on the event queue. " alt="" coords="1059,208,1170,235"/><area shape="rect" id="node5" href="main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667" title="main" alt="" coords="1219,233,1269,260"/><area shape="rect" id="node7" href="filesystem_8h.html#a365bb073efe6ce2fd372d3ba9c98affb" title="Halt the file system and save the state. " alt="" coords="318,284,373,311"/><area shape="rect" id="node8" href="system_8h.html#abbd955a477f08dbfae43e8c40b7b4d3b" title="End a data session. " alt="" coords="435,309,549,336"/><area shape="rect" id="node9" href="system_8h.html#aed7fd0b0746e3855fcbd2f62b4b34c3e" title="Enqueue a sysEvent in the event queue for execution. " alt="" coords="304,183,387,209"/><area shape="rect" id="node10" href="system_8h.html#a2be52727e38f4ff8974fee6e8cc7154f" title="Wake the system from sleep to start taking data or enter command. " alt="" coords="453,208,531,235"/><area shape="rect" id="node12" href="system_8h.html#a0e2e8dad2acdd9148767c662b08edb1b" title="Sample the MPU on an interrupt. " alt="" coords="449,107,535,133"/><area shape="rect" id="node15" href="system_8h.html#a741860d7c7ca2fc2ab305996586da3a8" title="Stop data collection. " alt="" coords="605,157,681,184"/><area shape="rect" id="node16" href="system_8h.html#a972eedbc68ae911757b8efa8952aa1fc" title="Update the system state. " alt="" coords="905,259,997,285"/><area shape="rect" id="node11" href="system_8h.html#ab112a1e0291e6fe889425ea1af602171" title="Put the system to sleep. " alt="" coords="605,208,681,235"/><area shape="rect" id="node13" href="system_8h.html#af0c0706aba53d227b07eb1c9fbadd568" title="Resume collection during a pause from data collection. " alt="" coords="597,56,688,83"/><area shape="rect" id="node14" href="system_8h.html#ad5e178a6a6d6d9bf4451608d1ed1c7ef" title="Pause the system during data collection. " alt="" coords="749,56,829,83"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 6 2014 12:36:22 for TEMPO 4 Core Platform Firmware by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
